/*C41*/SET SCHEMA PUBLIC
ALTER TABLE RESERVATION DROP CONSTRAINT FK_RESERVATION_MOVIESHOW_ID
ALTER TABLE MOVIESHOW DROP CONSTRAINT FK_MOVIESHOW_FILM_ID
ALTER TABLE THEATREHALL DROP CONSTRAINT FK_THEATREHALL_MOVIESHOW_MOVIESHOW_ID
DROP TABLE RESERVATION
DROP TABLE MOVIESHOW
DROP TABLE FILM
DROP TABLE THEATREHALL
DELETE FROM SEQUENCE WHERE SEQ_NAME='SEQ_GEN'
COMMIT
CREATE TABLE RESERVATION (ID BIGINT NOT NULL, BOOKEDSEATS VARCHAR(255), NAME VARCHAR(255), SURNAME VARCHAR(255), MOVIESHOW_ID BIGINT, PRIMARY KEY (ID))
CREATE TABLE MOVIESHOW (MOVIESHOW_ID BIGINT NOT NULL, DATE VARCHAR(1005), TIME VARCHAR(1000), FILM_ID BIGINT, PRIMARY KEY (MOVIESHOW_ID))
CREATE TABLE FILM (FILM_ID BIGINT NOT NULL, DESCRIPTION VARCHAR(1000), TITLE VARCHAR(1000), PRIMARY KEY (FILM_ID))
CREATE TABLE THEATREHALL (ID BIGINT NOT NULL, SEATS_RESERVATION_STATUS VARCHAR(1000), WHICH_HALL BIGINT, MOVIESHOW_MOVIESHOW_ID BIGINT, PRIMARY KEY (ID))
ALTER TABLE RESERVATION ADD CONSTRAINT FK_RESERVATION_MOVIESHOW_ID FOREIGN KEY (MOVIESHOW_ID) REFERENCES MOVIESHOW (MOVIESHOW_ID)
ALTER TABLE MOVIESHOW ADD CONSTRAINT FK_MOVIESHOW_FILM_ID FOREIGN KEY (FILM_ID) REFERENCES FILM (FILM_ID)
ALTER TABLE THEATREHALL ADD CONSTRAINT FK_THEATREHALL_MOVIESHOW_MOVIESHOW_ID FOREIGN KEY (MOVIESHOW_MOVIESHOW_ID) REFERENCES MOVIESHOW (MOVIESHOW_ID)
INSERT INTO SEQUENCE VALUES('SEQ_GEN',0)
COMMIT
ALTER TABLE RESERVATION DROP CONSTRAINT FK_RESERVATION_MOVIESHOW_ID
ALTER TABLE MOVIESHOW DROP CONSTRAINT FK_MOVIESHOW_FILM_ID
ALTER TABLE THEATREHALL DROP CONSTRAINT FK_THEATREHALL_MOVIESHOW_MOVIESHOW_ID
DROP TABLE RESERVATION
DROP TABLE MOVIESHOW
DROP TABLE FILM
DROP TABLE THEATREHALL
DELETE FROM SEQUENCE WHERE SEQ_NAME='SEQ_GEN'
COMMIT
CREATE TABLE RESERVATION (ID BIGINT NOT NULL, BOOKEDSEATS VARCHAR(255), NAME VARCHAR(255), SURNAME VARCHAR(255), MOVIESHOW_ID BIGINT, PRIMARY KEY (ID))
CREATE TABLE MOVIESHOW (MOVIESHOW_ID BIGINT NOT NULL, DATE VARCHAR(1005), TIME VARCHAR(1000), FILM_ID BIGINT, PRIMARY KEY (MOVIESHOW_ID))
CREATE TABLE FILM (FILM_ID BIGINT NOT NULL, DESCRIPTION VARCHAR(1000), TITLE VARCHAR(1000), PRIMARY KEY (FILM_ID))
CREATE TABLE THEATREHALL (ID BIGINT NOT NULL, SEATS_RESERVATION_STATUS VARCHAR(1000), WHICH_HALL BIGINT, MOVIESHOW_MOVIESHOW_ID BIGINT, PRIMARY KEY (ID))
ALTER TABLE RESERVATION ADD CONSTRAINT FK_RESERVATION_MOVIESHOW_ID FOREIGN KEY (MOVIESHOW_ID) REFERENCES MOVIESHOW (MOVIESHOW_ID)
ALTER TABLE MOVIESHOW ADD CONSTRAINT FK_MOVIESHOW_FILM_ID FOREIGN KEY (FILM_ID) REFERENCES FILM (FILM_ID)
ALTER TABLE THEATREHALL ADD CONSTRAINT FK_THEATREHALL_MOVIESHOW_MOVIESHOW_ID FOREIGN KEY (MOVIESHOW_MOVIESHOW_ID) REFERENCES MOVIESHOW (MOVIESHOW_ID)
INSERT INTO SEQUENCE VALUES('SEQ_GEN',0)
COMMIT
